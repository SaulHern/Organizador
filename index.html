<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi A√±o de 12 Semanas</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- ESTILOS CSS --- */
        
        /* Estilos Generales */
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f4f7f9;
            color: #333;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        header, footer {
            text-align: center;
            margin-bottom: 20px;
        }

        h1 {
            color: #2c3e50;
        }

        /* Contenedor Principal */
        main {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Cuadr√≠cula de Semanas */
        .weeks-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .week-card {
            background: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            padding: 20px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            border-left: 5px solid #3498db;
        }

        .week-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .week-card h3 {
            margin-top: 0;
            color: #3498db;
        }

        .week-card p {
            font-size: 0.9em;
            color: #7f8c8d;
        }

        /* Vista Detallada de los D√≠as */
        .days-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .day-card {
            background: #fff;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
        }

        .day-card h4 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 5px;
        }

        textarea {
            width: 100%;
            min-height: 150px;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            font-family: inherit;
            font-size: 0.95em;
            box-sizing: border-box; /* Asegura que el padding no afecte el ancho total */
        }
        
        /* Estilos del objetivo semanal */
        .weekly-objective {
            background-color: #fff;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
        }

        .weekly-objective label {
            display: block;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .weekly-objective input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
        }

        /* Botones */
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: background-color 0.2s;
            display: block;
            margin: 20px auto 0 auto;
        }

        button:hover {
            background-color: #2980b9;
        }

        #back-to-weeks-btn {
            background-color: #95a5a6;
            margin: 0 0 20px 0;
        }

        #back-to-weeks-btn:hover {
            background-color: #7f8c8d;
        }

        /* Utilidades */
        .hidden {
            display: none;
        }

        /* Dise√±o Responsivo para Tel√©fonos */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .weeks-grid, .days-grid {
                grid-template-columns: 1fr; /* Una sola columna en pantallas peque√±as */
            }
        }
    </style>
</head>
<body>

    <header>
        <h1>Mi Planificador de 12 Semanas üóìÔ∏è</h1>
        <p>Define tus metas, organiza tus d√≠as y conquista tu a√±o.</p>
    </header>

    <main>
        <div id="weeks-view">
            <div id="weeks-container" class="weeks-grid">
                </div>
        </div>

        <div id="daily-view" class="hidden">
            <button id="back-to-weeks-btn">‚Üê Volver a las Semanas</button>
            <h2 id="daily-view-title"></h2>
            <div class="weekly-objective">
                <label for="weekly-objective-input">üéØ Objetivo de la Semana:</label>
                <input type="text" id="weekly-objective-input" placeholder="Define tu meta principal para esta semana...">
            </div>
            <div id="days-container" class="days-grid">
                </div>
            <button id="save-week-btn">Guardar Cambios de la Semana</button>
        </div>
    </main>

    <footer>
        <p>Hecho con ‚ù§Ô∏è para la planificaci√≥n personal.</p>
    </footer>

    <script>
        // --- L√ìGICA JAVASCRIPT ---

        // Se asegura de que el script se ejecute solo despu√©s de que toda la p√°gina HTML se haya cargado.
        document.addEventListener('DOMContentLoaded', () => {

            // Referencias a los elementos del DOM que usaremos
            const weeksView = document.getElementById('weeks-view');
            const dailyView = document.getElementById('daily-view');
            const weeksContainer = document.getElementById('weeks-container');
            const daysContainer = document.getElementById('days-container');
            const dailyViewTitle = document.getElementById('daily-view-title');
            const weeklyObjectiveInput = document.getElementById('weekly-objective-input');
            
            const backToWeeksBtn = document.getElementById('back-to-weeks-btn');
            const saveWeekBtn = document.getElementById('save-week-btn');

            let currentWeekIndex = null; // Para saber qu√© semana estamos editando
            let plannerData = []; // Aqu√≠ guardaremos todos los datos

            const weekDays = ["Lunes", "Martes", "Mi√©rcoles", "Jueves", "Viernes", "S√°bado", "Domingo"];

            // --- FUNCIONES DE MANEJO DE DATOS ---

            // Carga los datos desde localStorage o crea datos iniciales si no existen
            function loadData() {
                const savedData = localStorage.getItem('12WeekPlanner');
                if (savedData) {
                    plannerData = JSON.parse(savedData);
                } else {
                    // Si no hay datos, creamos la estructura para 12 semanas
                    plannerData = Array.from({ length: 12 }, (_, i) => ({
                        week: i + 1,
                        objective: '',
                        days: weekDays.map(day => ({ dayName: day, tasks: '' }))
                    }));
                }
            }

            // Guarda los datos actuales en localStorage
            function saveData() {
                localStorage.setItem('12WeekPlanner', JSON.stringify(plannerData));
                alert('¬°Progreso guardado con √©xito!');
            }

            // --- FUNCIONES DE RENDERIZADO (DIBUJAR EN PANTALLA) ---

            // Dibuja las 12 tarjetas de las semanas en la vista principal
            function renderWeeks() {
                weeksContainer.innerHTML = ''; // Limpiamos el contenedor
                plannerData.forEach((weekData, index) => {
                    const weekCard = document.createElement('div');
                    weekCard.className = 'week-card';
                    // Asignamos un bloque visual (1, 2, 3, 4) para el concepto de 4 bloques
                    const block = Math.floor(index / 3) + 1;
                    weekCard.innerHTML = `
                        <h3>Semana ${weekData.week} (Bloque ${block})</h3>
                        <p><strong>Objetivo:</strong> ${weekData.objective || 'A√∫n no definido'}</p>
                    `;
                    // A√±adimos un evento para que al hacer clic, se muestre la vista diaria
                    weekCard.addEventListener('click', () => showDailyView(index));
                    weeksContainer.appendChild(weekCard);
                });
            }

            // Muestra la vista detallada para una semana espec√≠fica
            function showDailyView(weekIndex) {
                currentWeekIndex = weekIndex;
                const weekData = plannerData[weekIndex];

                // Actualizamos la interfaz
                dailyViewTitle.textContent = `Detalles de la Semana ${weekData.week}`;
                weeklyObjectiveInput.value = weekData.objective;
                
                daysContainer.innerHTML = ''; // Limpiamos el contenedor de d√≠as
                weekData.days.forEach(dayData => {
                    const dayCard = document.createElement('div');
                    dayCard.className = 'day-card';
                    dayCard.innerHTML = `
                        <h4>${dayData.dayName}</h4>
                        <textarea data-day="${dayData.dayName}" placeholder="Anota tus tareas y planes para este d√≠a...">${dayData.tasks}</textarea>
                    `;
                    daysContainer.appendChild(dayCard);
                });

                // Ocultamos la vista de semanas y mostramos la vista diaria
                weeksView.classList.add('hidden');
                dailyView.classList.remove('hidden');
            }

            // Oculta la vista diaria y vuelve a la vista de semanas
            function showWeeksView() {
                dailyView.classList.add('hidden');
                weeksView.classList.remove('hidden');
                // Volvemos a renderizar las semanas por si se actualiz√≥ un objetivo
                renderWeeks();
            }

            // --- MANEJADORES DE EVENTOS ---
            
            // Bot√≥n para volver a la vista de semanas
            backToWeeksBtn.addEventListener('click', showWeeksView);

            // Bot√≥n para guardar los cambios de una semana
            saveWeekBtn.addEventListener('click', () => {
                if (currentWeekIndex === null) return;

                // Guardar el objetivo de la semana
                plannerData[currentWeekIndex].objective = weeklyObjectiveInput.value;

                // Guardar las tareas de cada d√≠a
                const textareas = daysContainer.querySelectorAll('textarea');
                textareas.forEach(textarea => {
                    const dayName = textarea.getAttribute('data-day');
                    const dayToUpdate = plannerData[currentWeekIndex].days.find(d => d.dayName === dayName);
                    if (dayToUpdate) {
                        dayToUpdate.tasks = textarea.value;
                    }
                });

                saveData(); // Guardar todo en localStorage
                showWeeksView(); // Volver a la vista principal
            });


            // --- INICIALIZACI√ìN ---
            function init() {
                loadData();
                renderWeeks();
            }

            init(); // ¬°Iniciamos la aplicaci√≥n!

        });
    </script>
</body>
</html>
